// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Dashboard_Entity {
  id       Int                @id @default(autoincrement())
  name     String
  parentId Int?               @unique
  parent   Dashboard_Entity?  @relation("ParentChild", fields: [parentId], references: [id])
  children Dashboard_Entity[] @relation("ParentChild")
  group    Dashboard_Group?
  assets   Dashboard_Asset[]
}

model Dashboard_Profile {
  id    Int              @id @default(autoincrement())
  name  String
  users Dashboard_User[]
}

model Dashboard_Group {
  id Int @id @default(autoincrement())

  name String

  entityId Int              @unique
  entity   Dashboard_Entity @relation(fields: [entityId], references: [id])

  users Dashboard_User[]
}

model Dashboard_User {
  id Int @id @default(autoincrement())

  name String

  groupId Int              @unique
  group   Dashboard_Group? @relation(fields: [groupId], references: [id])

  profileId Int?               @unique
  profile   Dashboard_Profile? @relation(fields: [profileId], references: [id])
}

model Dashboard_Location {
  id    Int               @id @default(autoincrement())
  name  String
  asset Dashboard_Asset[]
}

model Dashboard_AssetType {
  id     Int               @id @default(autoincrement())
  name   String            @unique
  assets Dashboard_Asset[]
  models Dashboard_Model[]
  types  Dashboard_Type[]
}

model Dashboard_Type {
  id          Int                 @id @default(autoincrement())
  name        String
  assetTypeId Int
  assetType   Dashboard_AssetType @relation(fields: [assetTypeId], references: [id])
  assets      Dashboard_Asset[]
}

model Dashboard_Model {
  id          Int                 @id @default(autoincrement())
  name        String
  assetTypeId Int
  assetType   Dashboard_AssetType @relation(fields: [assetTypeId], references: [id])
  assets      Dashboard_Asset[]
}

model Dashboard_Asset {
  id   Int    @id @default(autoincrement())
  name String

  entityId Int
  entity   Dashboard_Entity @relation(fields: [entityId], references: [id])

  assetTypeId Int
  assetType   Dashboard_AssetType @relation(fields: [assetTypeId], references: [id])

  locationId Int?
  location   Dashboard_Location? @relation(fields: [locationId], references: [id])

  modelId Int?
  model   Dashboard_Model? @relation(fields: [modelId], references: [id])

  typeId Int?
  type   Dashboard_Type? @relation(fields: [typeId], references: [id])
}
